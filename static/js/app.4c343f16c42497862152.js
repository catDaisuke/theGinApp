webpackJsonp([1],{102:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e(50),s=e(104),r=e(108),o=e(159),i=(e.n(o),e(160)),c=(e.n(i),e(161)),l=e.n(c),u=e(38),v=e(163),d=(e.n(v),e(164)),p=(e.n(d),e(165));n.a.use(l.a),n.a.use(p.a),n.a.use(u.a),n.a.config.productionTip=!1,new n.a({el:"#app",router:r.a,template:"<App/>",components:{App:s.a}})},104:function(t,a,e){"use strict";function n(t){e(105)}var s=e(52),r=e(107),o=e(12),i=n,c=o(s.a,r.a,!1,i,null,null);a.a=c.exports},105:function(t,a){},107:function(t,a,e){"use strict";var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"app"}},[t._m(0),t._v(" "),e("main",[e("router-view")],1)])},s=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("header",[e("span",[t._v("Vue.js PWA")])])}],r={render:n,staticRenderFns:s};a.a=r},108:function(t,a,e){"use strict";var n=e(50),s=e(109),r=e(110),o=e(113),i=e(147),c=e(156);n.a.use(s.a),a.a=new s.a({routes:[{path:"/",name:"Hello",component:r.a},{path:"/rank",name:"Hello",component:i.a},{path:"/1",name:"Hello1",component:o.a},{path:"/member",name:"Member",component:c.a}]})},110:function(t,a,e){"use strict";function n(t){e(111)}var s=e(53),r=e(112),o=e(12),i=n,c=o(s.a,r.a,!1,i,"data-v-671ddb56",null);a.a=c.exports},111:function(t,a){},112:function(t,a,e){"use strict";var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-ons-page",[e("div",{staticClass:"hello"},[e("h1",[t._v(t._s(t.msg))]),t._v(" "),e("h2",[e("router-link",{attrs:{to:"/1"}},[t._v("GAME START")])],1),t._v(" "),e("h2",[e("router-link",{attrs:{to:"/rank"}},[t._v("RANKING")])],1)])])},s=[],r={render:n,staticRenderFns:s};a.a=r},113:function(t,a,e){"use strict";function n(t){e(114)}var s=e(54),r=e(146),o=e(12),i=n,c=o(s.a,r.a,!1,i,"data-v-556b1fdb",null);a.a=c.exports},114:function(t,a){},142:function(t,a){},143:function(t,a,e){"use strict";var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"v-spinner"},[e("div",{staticClass:"v-pulse v-pulse1",style:[t.spinnerStyle,t.spinnerDelay1]}),e("div",{staticClass:"v-pulse v-pulse2",style:[t.spinnerStyle,t.spinnerDelay2]}),e("div",{staticClass:"v-pulse v-pulse3",style:[t.spinnerStyle,t.spinnerDelay3]})])},s=[],r={render:n,staticRenderFns:s};a.a=r},144:function(t,a,e){t.exports=e.p+"static/media/NewWorld.26625af.mp3"},145:function(t,a,e){t.exports=e.p+"static/media/beamgun-shot1.bc03097.mp3"},146:function(t,a,e){"use strict";var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-ons-page",[e("h1",[e("router-link",{attrs:{to:"/"}},[t._v("EMOTION COMPETITION")])],1),t._v(" "),e("audio",{attrs:{id:"bgm",name:"bgm",src:t.bgm,autoplay:"",loop:""}}),t._v(" "),e("audio",{attrs:{id:"shot",name:"shot",src:t.shot}}),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.count<3,expression:"count < 3"}],staticClass:"camera"},[e("v-ons-row",[e("v-ons-col",{attrs:{"vertical-align":"center"}},[e("video",{directives:[{name:"show",rawName:"v-show",value:t.videoflg,expression:"videoflg"}],ref:"video",attrs:{width:"50%",autoplay:"",playsinline:""}}),t._v(" "),e("canvas",{directives:[{name:"show",rawName:"v-show",value:t.canvasflg,expression:"canvasflg"}],ref:"canvas",attrs:{id:"canvas"}}),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.canvasflg,expression:"canvasflg"}],staticClass:"load"},[e("pulse-loader",{attrs:{loading:"loading",color:"#90ee90",size:"40px"}})],1)])],1),t._v(" "),e("v-ons-row",[e("v-ons-col",{attrs:{"vertical-align":"center"}},[e("h3",[t._v(t._s(t.emotion[t.gameEmotionList[t.count]])+"!")])])],1),t._v(" "),e("v-ons-row",[e("v-ons-col",{attrs:{"vertical-align":"center"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:4!==t.snapcount,expression:"snapcount !== 4"}],staticClass:"snapcount"},[e("h3",[t._v(t._s(t.snapcount))])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:4===t.snapcount,expression:"snapcount === 4"}],staticClass:"snapcount"},[e("h3",[t._v("ready?")])])])],1),t._v(" "),e("v-ons-row",[e("v-ons-col",{attrs:{"vertical-align":"center"}},[e("v-ons-button",{attrs:{disabled:!t.gameflg,id:"snap"},on:{click:function(a){t.capturesFunc()}}},[t._v("START")])],1)],1),t._v(" "),e("v-ons-row",[e("v-ons-col",{staticClass:"back",attrs:{"vertical-align":"center"}},[e("router-link",{attrs:{to:"/"}},[t._v("◀︎BACK")])],1)],1)],1),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.count>2,expression:"count > 2"}],staticClass:"result"},[e("h2",[t._v("Result")]),t._v(" "),e("b-container",{staticClass:"resultRow"},[t._l(t.emotionArr,function(a,n){return e("b-row",{key:n},[e("b-col",{staticClass:"score"},[t._v("\n        "+t._s(t.emotion[t.emotionNumArr[n]])+"： "+t._s(Math.floor(1e4*a[t.emotion[t.emotionNumArr[n]]])/100)+" / 100 Pt\n      ")])],1)}),t._v(" "),e("br"),t._v(" "),e("b-row",[e("b-col",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.userId,expression:"userId"}],attrs:{type:"text",maxlength:"7",pattern:"/^[a-zA-Z0-9]+$/",placeholder:"INPUT YOUR USERNAME"},domProps:{value:t.userId},on:{input:function(a){a.target.composing||(t.userId=a.target.value)}}})])],1),t._v(" "),e("b-row",[e("b-col",[e("v-ons-button",{attrs:{id:"resist"},on:{click:function(a){t.send()}}},[t._v("REGISTER")])],1)],1),t._v(" "),e("br")],2),t._v(" "),e("v-ons-row",[e("v-ons-col",{attrs:{"vertical-align":"center"}},[e("v-ons-button",{attrs:{id:"retry"},on:{click:function(a){t.retry()}}},[t._v("RETRY")])],1)],1),t._v(" "),e("v-ons-row",[e("v-ons-col",{staticClass:"back",attrs:{"vertical-align":"center"}},[e("router-link",{attrs:{to:"/"}},[t._v("◀︎BACK")])],1)],1)],1)])},s=[],r={render:n,staticRenderFns:s};a.a=r},147:function(t,a,e){"use strict";function n(t){e(148)}var s=e(70),r=e(155),o=e(12),i=n,c=o(s.a,r.a,!1,i,"data-v-544e0cb7",null);a.a=c.exports},148:function(t,a){},155:function(t,a,e){"use strict";var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-ons-page",[e("div",{staticClass:"rank"},[e("h1",[e("router-link",{attrs:{to:"/"}},[t._v("EMOTION COMPETITION")])],1),t._v(" "),e("h2",[t._v("Ranking")]),t._v(" "),e("b-container",{staticClass:"rankContainer"},[e("b-row",[e("b-col",{attrs:{"vertical-align":"center"}},[e("h3",[t._v("Total")])])],1),t._v(" "),t._l(t.overAllRank,function(a,n){return e("b-row",{key:a.userId},[e("b-col",{staticClass:"num",attrs:{cols:"2",sm:"3"}},[t._v("\n        "+t._s(n+1)+": \n      ")]),t._v(" "),e("b-col",{staticClass:"name",attrs:{cols:"4",sm:"4"}},[t._v("\n        "+t._s(t.convertUserName(a.userId))+"\n      ")]),t._v(" "),e("b-col",{staticClass:"score",attrs:{cols:"6",sm:"5"}},[t._v("\n         : "+t._s(Math.floor(1e4*a.sum)/100)+" Pt\n      ")])],1)}),t._v(" "),e("br"),t._v(" "),e("br"),t._v(" "),e("b-row",[e("b-col",{attrs:{"vertical-align":"center"}},[e("h3",[t._v("happiness")])])],1),t._v(" "),t._l(t.smileRank,function(a,n){return e("b-row",{key:a.userId},[e("b-col",{staticClass:"num",attrs:{cols:"2",sm:"3"}},[t._v("\n        "+t._s(n+1)+": \n      ")]),t._v(" "),e("b-col",{staticClass:"name",attrs:{cols:"4",sm:"4"}},[t._v("\n        "+t._s(t.convertUserName(a.userId))+"\n      ")]),t._v(" "),e("b-col",{staticClass:"score",attrs:{cols:"6",sm:"5"}},[t._v("\n         : "+t._s(Math.floor(1e4*a.happiness)/100)+" Pt\n      ")])],1)}),t._v(" "),e("b-row",[e("b-col",{attrs:{"vertical-align":"center"}},[e("h3",[t._v("surpirse")])])],1),t._v(" "),t._l(t.surpriseRank,function(a,n){return e("b-row",{key:a.userId},[e("b-col",{staticClass:"num",attrs:{cols:"2",sm:"3"}},[t._v("\n        "+t._s(n+1)+": \n      ")]),t._v(" "),e("b-col",{staticClass:"name",attrs:{cols:"4",sm:"4"}},[t._v("\n        "+t._s(t.convertUserName(a.userId))+"\n      ")]),t._v(" "),e("b-col",{staticClass:"score",attrs:{cols:"6",sm:"5"}},[t._v("\n         : "+t._s(Math.floor(1e4*a.surprise)/100)+" Pt\n      ")])],1)}),t._v(" "),e("b-row",[e("b-col",{attrs:{"vertical-align":"center"}},[e("h3",[t._v("neutral")])])],1),t._v(" "),t._l(t.neutralRank,function(a,n){return e("b-row",{key:a.userId},[e("b-col",{staticClass:"num",attrs:{cols:"2",sm:"3"}},[t._v("\n        "+t._s(n+1)+": \n      ")]),t._v(" "),e("b-col",{staticClass:"name",attrs:{cols:"4",sm:"4"}},[t._v("\n        "+t._s(t.convertUserName(a.userId))+"\n      ")]),t._v(" "),e("b-col",{staticClass:"score",attrs:{cols:"6",sm:"5"}},[t._v("\n         : "+t._s(Math.floor(1e4*a.neutral)/100)+" Pt\n      ")])],1)}),t._v(" "),e("b-row",{staticClass:"back"},[e("b-col",{attrs:{"vertical-align":"center"}},[e("router-link",{attrs:{to:"/"}},[t._v("◀︎BACK")])],1)],1)],2)],1)])},s=[],r={render:n,staticRenderFns:s};a.a=r},156:function(t,a,e){"use strict";function n(t){e(157)}var s=e(71),r=e(158),o=e(12),i=n,c=o(s.a,r.a,!1,i,"data-v-81489954",null);a.a=c.exports},157:function(t,a){},158:function(t,a,e){"use strict";var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-ons-page",[e("div",{staticClass:"Member"},[e("h1",[t._v(t._s(t.msg))])])])},s=[],r={render:n,staticRenderFns:s};a.a=r},159:function(t,a){},160:function(t,a){},163:function(t,a){},164:function(t,a){},169:function(t,a){},198:function(t,a){},215:function(t,a){},260:function(t,a){},38:function(t,a,e){"use strict";function n(t){e(142)}var s=e(69),r=e(143),o=e(12),i=n,c=o(s.a,r.a,!1,i,null,null);a.a=c.exports},52:function(t,a,e){"use strict";a.a={name:"app"}},53:function(t,a,e){"use strict";a.a={name:"hello",data:function(){return{msg:"EMOTION COMPETITION"}}}},54:function(t,a,e){"use strict";(function(t){var n=e(115),s=e.n(n),r=e(117),o=e.n(r),i=e(38),c=e(144),l=e.n(c),u=e(145),v=e.n(u);a.a={components:{PulseLoader:i.a},name:"hello1",data:function(){return{bgm:l.a,shot:v.a,muted:!1,video:{},canvas:{},captures:[],gameflg:!0,videoflg:!0,canvasflg:!1,emotionArr:[],count:0,emotion_kana:["怒り顔","侮辱顔","嫌悪の顔","怖がった顔","幸せ顔","無表情","悲しい顔","驚いた顔"],emotion:["anger","contempt","disgust","fear","happiness","neutral","sadness","surprise"],gameEmotionList:[4,7,5],emotionNumArr:[],userId:null,snapcount:4}},mounted:function(){this.video=this.$refs.video;var t={audio:!1,video:!0};navigator.getUserMedia(t,this.successCallback,this.errorCallback)},watch:{muted:function(t){var a=document.getElementById("bgm");t?a.pause():a.play()},count:function(t){if(t>2){var a=!0,e=!1,n=void 0;try{for(var s,r=o()(this.$data.captures);!(a=(s=r.next()).done);a=!0){var i=s.value;this.calcScore(i)}}catch(t){e=!0,n=t}finally{try{!a&&r.return&&r.return()}finally{if(e)throw n}}}}},methods:{loopSleep:function(t,a,e){var n=t,s=a,r=e,o=0;!function t(){!1!==r(o)&&(o+=1)<n&&setTimeout(t,s)}()},capturesFunc:function(){this.$data.gameflg=!1,this.loopSleep(12,1500,this.capture)},calcScore:function(a){var e={},n=this;t.ajax({url:"https://westus.api.cognitive.microsoft.com/emotion/v1.0/recognize?"+t.param(e),beforeSend:function(t){t.setRequestHeader("Content-Type","application/octet-stream"),t.setRequestHeader("Ocp-Apim-Subscription-Key","4dfe28f1041d48e1a36f469e67ec93d6")},type:"POST",data:this.makeblobdata(a),processData:!1,async:!1}).done(function(t){n.$data.emotionArr.push(t[0].scores),n.$data.emotionNumArr.push(n.$data.gameEmotionList[n.$data.count]),n.$data.canvasflg=!1,n.$data.videoflg=!0}).fail(function(t){alert("Please try again"),console.log(t),n.$data.canvasflg=!1,n.$data.videoflg=!0})},successCallback:function(t){this.video.srcObject=t},errorCallback:function(t){alert(t)},makeblobdata:function(t){var a,e,n,s;if(-1===t.indexOf(";base64,"))return a=t.split(","),e=a[0].split(":")[1],n=decodeURIComponent(a[1]),new Blob([n],{type:e});a=t.split(";base64,"),e=a[0].split(":")[1],n=window.atob(a[1]),s=n.length;for(var r=new Uint8Array(s),o=0;o<s;++o)r[o]=n.charCodeAt(o);return new Blob([r],{type:e})},capture:function(){if(this.$data.snapcount-=1,0===this.$data.snapcount){document.getElementById("shot").play(),this.canvas=this.$refs.canvas;var t=this.video.offsetWidth,a=this.video.offsetHeight;this.canvas.setAttribute("width",t),this.canvas.setAttribute("height",a),this.$data.canvasflg=!0,this.canvas.getContext("2d").drawImage(this.video,0,0,t,a),this.$data.videoflg=!1,this.captures.push(this.canvas.toDataURL()),this.$data.emotionNumArr.push(this.$data.gameEmotionList[this.$data.count]),this.$data.count=this.$data.count+1,this.$data.canvasflg=!1,this.$data.videoflg=!0,this.$data.snapcount=4}},retry:function(){this.$data.count=0,this.$data.captures=[],this.$data.emotionNumArr=[],this.$data.emotionArr=[],this.$data.videoflg=!0,this.$data.canvasflg=!1,this.$data.gameflg=!0},send:function(){if(null===this.$data.userId||""===this.$data.userId)return void alert("登録名を入力してください");if(!this.$data.userId.match(/^[A-Za-z0-9]*$/))return void alert("登録名は半角英数字で入力してください");var a=new Date,e=a.getFullYear(),n=a.getMonth()+1,r=a.getDate();n<10&&(n="0"+n),r<10&&(r="0"+r);var o=e+"-"+n+"-"+r,i=this.$data.emotionArr[0].happiness,c=this.$data.emotionArr[1].surprise,l=this.$data.emotionArr[2].neutral,u={userId:this.$data.userId,date:o,happiness:this.$data.emotionArr[0].happiness,surprise:this.$data.emotionArr[1].surprise,neutral:this.$data.emotionArr[2].neutral,sum:i+c+l},v=this;t.ajax({url:"https://ldvqd6fhxk.execute-api.ap-northeast-1.amazonaws.com/prod/",type:"POST",dataType:"json",data:s()(u),scriptCharset:"UTF-8",async:!1,contentType:"application/json"}).done(function(t){alert("登録完了"),v.$data.count=0,v.$data.captures=[],v.$data.emotionNumArr=[],v.$data.emotionArr=[],v.$data.videoflg=!0,v.$data.canvasflg=!1,v.$data.gameflg=!0}).fail(function(t){console.log(t),alert("登録に失敗しました。再度顔をとってね"),v.$data.count=0,v.$data.captures=[],v.$data.emotionNumArr=[],v.$data.emotionArr=[],v.$data.videoflg=!0,v.$data.canvasflg=!1,v.$data.gameflg=!0})}}}}).call(a,e(55))},69:function(t,a,e){"use strict";a.a={name:"PulseLoader",props:{loading:{type:Boolean,default:!0},color:{type:String,default:"#5dc596"},size:{type:String,default:"15px"},margin:{type:String,default:"2px"},radius:{type:String,default:"100%"}},data:function(){return{spinnerStyle:{backgroundColor:this.color,width:this.size,height:this.size,margin:this.margin,borderRadius:this.radius,display:"inline-block",animationName:"v-pulseStretchDelay",animationDuration:"0.75s",animationIterationCount:"infinite",animationTimingFunction:"cubic-bezier(.2,.68,.18,1.08)",animationFillMode:"both"},spinnerDelay1:{animationDelay:"0.12s"},spinnerDelay2:{animationDelay:"0.24s"},spinnerDelay3:{animationDelay:"0.36s"}}}}},70:function(t,a,e){"use strict";(function(t){var n=e(149),s=e.n(n),r=e(38);a.a={components:{PulseLoader:r.a},name:"hello1",data:function(){return{list:[],smileRank:[],surpriseRank:[],neutralRank:[],overAllRank:[]}},computed:{},mounted:function(){var a=this;t.ajax({url:"https://ldvqd6fhxk.execute-api.ap-northeast-1.amazonaws.com/prod/result/today",type:"GET",dataType:"json",scriptCharset:"UTF-8"}).done(function(t){if(console.log(t),t.sort(function(t,a){return t.happiness>a.happiness?-1:t.happiness<a.happiness?1:0}),s()(a.$data.smileRank,t),a.$data.smileRank.length>3)a.$data.smileRank=a.$data.smileRank.slice(0,3);else for(;a.$data.smileRank.length<3;)a.$data.smileRank.push({"-":0});if(t.sort(function(t,a){return t.surprise>a.surprise?-1:t.surprise<a.surprise?1:0}),s()(a.$data.surpriseRank,t),a.$data.surpriseRank.length>3)a.$data.surpriseRank=a.$data.surpriseRank.slice(0,3);else for(;a.$data.surpriseRank.length<3;)a.$data.surpriseRank.push({"-":0});if(t.sort(function(t,a){return t.neutral>a.neutral?-1:t.neutral<a.neutral?1:0}),s()(a.$data.neutralRank,t),a.$data.neutralRank.length>3)a.$data.neutralRank=a.$data.neutralRank.slice(0,3);else for(;a.$data.neutralRank.length<3;)a.$data.neutralRank.push({"-":0});if(t.sort(function(t,a){return t.sum>a.sum?-1:t.sum<a.sum?1:0}),a.$data.overAllRank=t,a.$data.overAllRank.length>3)a.$data.overAllRank=a.$data.overAllRank.slice(0,3);else for(;a.$data.overAllRank.length<3;)a.$data.overAllRank.push({"-":0})}).fail(function(t,a,e){})},methods:{convertUserName:function(t){return console.log(t),void 0===t||""===t?"undefind":t}}}}).call(a,e(55))},71:function(t,a,e){"use strict";a.a={name:"hello",data:function(){return{msg:"TheGin App"}}}}},[102]);
//# sourceMappingURL=app.4c343f16c42497862152.js.map